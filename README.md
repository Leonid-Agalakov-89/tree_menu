# Древовидное меню на Django

Этот проект реализует древовидное меню с использованием Django. Меню хранится в базе данных, управляется через админку Django и отображается с помощью пользовательского тега шаблона. Поддерживаются несколько меню, динамическое разворачивание на основе текущего URL, а также работа как с явными, так и с именованными URL.

## Функционал

- Древовидное меню, хранящееся в базе данных.
- Отображение меню с помощью тега шаблона (`{% draw_menu 'menu_name' %}`).
- Разворачивание пунктов меню в зависимости от текущей страницы.
- Поддержка нескольких меню на одной странице.
- Удобное управление через стандартную админку Django.
- Эффективные запросы к базе данных (1 запрос на отображение каждого меню).

## Требования

- Python 3.x
- Django 3.x или 4.x

## Установка

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/Leonid-Agalakov-89/tree_menu.git
    cd tree_menu
    ```

2. **Создайте виртуальное окружение (рекомендуется):**

    ```bash
    python3 -m venv env
    source env/bin/activate  # Для Windows: `env\Scripts\activate`
    ```

3. **Установите зависимости:**

    ```bash
    pip install -r requirements.txt
    ```

4. **Настройте базу данных:**

    В файле `settings.py` при необходимости укажите параметры для вашей базы данных. По умолчанию используется SQLite.

5. **Примените миграции:**

    ```bash
    python manage.py migrate
    ```

6. **Создайте суперпользователя для доступа к админке:**

    ```bash
    python manage.py createsuperuser
    ```

7. **Запустите сервер разработки:**

    ```bash
    python manage.py runserver
    ```

    Теперь проект доступен по адресу `http://127.0.0.1:8000/`.

## Использование

1. **Доступ к админке:**

    Перейдите по адресу `http://127.0.0.1:8000/admin/` и войдите с помощью учетных данных суперпользователя.

2. **Создание нового меню:**

    - В админке перейдите в раздел "Menu items".
    - Добавьте новый элемент меню, указав его название, URL (или именованный URL), родительский элемент (если есть) и имя меню.

3. **Отображение меню на странице:**

    - В шаблоне подключите теги шаблонов и используйте тег `draw_menu` для вывода нужного меню:

      ```html
      {% load menu_tags %}
      {% draw_menu 'main_menu' %}
      ```

    - Замените `'main_menu'` на имя меню, которое нужно отобразить.

## Структура проекта

- `menu/` - Основное приложение, которое реализует функционал древовидного меню.
- `menu/templates/menu/menu_recursive.html` - Шаблон для рекурсивного рендеринга пунктов меню.
- `menu/templatetags/menu_tags.py` - Пользовательский тег шаблона для вывода меню.
- `menu/models.py` - Модель меню с поддержкой древовидной структуры и хранения в базе данных.

## Пример

1. Создайте несколько элементов меню в админке, например:

    - **Главная**
    - **Услуги**
      - **Веб-разработка**
        - Python
      - Мобильная разработка
    - **О нас**
      - Команда
      - История

2. Используйте тег `draw_menu` в шаблоне:

    ```html
    {% load menu_tags %}
    <div>
      {% draw_menu 'main_menu' %}
    </div>
    ```

    Меню будет автоматически разворачиваться в зависимости от текущего URL.

## Кастомизация

- **Типы URL:** Можно использовать как статические URL (например, `/about/`), так и именованные URL (`{% url 'about' %}`).
- **Глубина меню:** Шаблон рекурсивно обрабатывает любой уровень вложенности пунктов меню.

## Об авторе:
Леонид Агалаков - python backend developer.
`https://github.com/Leonid-Agalakov-89`
